#include<stdio.h>
#include<stdlib.h>
#include<string.h>//03
#define NOMEARQUIVO "ficha_bandas.bin"

struct banda
{
    char nome[30];
    char estilo[10];
    int numero_integrantes;
    int ranking;
};

struct banda bandas[4];

int preencherBanda(void);//
void printaBanda(void);//
void menu(void);//
void funcaoRanking(void);//
void estilomusica(void);//
void nomebanda(void);//
int load_file(void);

FILE * fileOpen(char nome[],char modo[]);


void main(void)
{
    menu();
}

void menu()
{
    int escolha=0;
    do
    {
        printf("\n\t ------------- MENU ------------- \n");
        printf("\n\t 1- PREENCHER BANDA");
        printf("\n\t 2- SOLICITAR BANDA");
        printf("\n\t 3- BUSCA POR RANKING");
        printf("\n\t 4- BUSCA POR BANDA");
        printf("\n\t 5- LISTAR BANDAS");
        printf("\n\t 0- SAIR\n\n\n");
        printf("\tOpcao: ");
        scanf("%d", &escolha);
        switch(escolha)
        {
        case 1:


            if (preencherBanda()==0)
            {

                printf("\n\tCadastrado com sucesso!!\n");

            }
            else
            {


                printf("\n\n\tLista cheia!!\n");
            }



            break;
        case 2:
           // printaBanda();//05
            break;
        case 3:
            //funcaoRanking(); //02
            break;
        case 4:
            //estilomusica(); //03
            break;
        case 5:
            //nomebanda(); //04
            break;
        }
    }
    while(escolha!=0);
}


int preencherBanda(){

FILE *file = fileOpen(NOMEARQUIVO,"ab");

    int r;

    r = list_cadastros();

    if(r < 4)
    {


        //preencher os dados



        fwrite(&bandas[0],sizeof(struct banda),1,file);

        fclose(file);
        return 0;

    }

    fclose(file);
    return 1;




    }




FILE* fileOpen(char nome[],char modo[])
{
    FILE *fp;
    if((fp = fopen(nome,modo)) == NULL)
    {
        printf("\n\n\tArquivo <%s> nao encontrado!!\n",nome);
    }
    return fp;
}

int list_cadastros()
{

    int result;

    FILE *file = fileOpen(NOMEARQUIVO,"rb");

    return  result = fread(&bandas[0],sizeof(struct banda),4,file);

}
